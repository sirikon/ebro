imports:
  docker:
    from: ./docker
    # generated:
    #   script: hoho

tasks:
  default:
    requires: [echoer, producer, docker]

  echoer:
    script: |
      echo cache/A.txt
      echo cache/B.txt

  producer:
    requires: [produce_a, produce_b]

  produce_a:
    requires: [cache_dir]
    required_by: [echoer]
    script: echo 'this is A'>cache/A.txt
    skip_if: test -f cache/A.txt

  produce_b:
    requires: [cache_dir]
    required_by: [echoer]
    script: echo 'this is A'>cache/A.txt
    skip_if: test -f cache/A.txt

  cache_dir:
    script: mkdir -p cache
    skip_if: test -d cache
