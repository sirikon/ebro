environment:
  DOCKER_MODULE_LOCATION: "docker"
  DOCKER_PLUGINS_MODULE_LOCATION: "${EBRO_ROOT}/docker_plugins"

imports:
  apt:
    from: ./apt
  docker:
    from: "./${DOCKER_MODULE_LOCATION}"
    environment:
      DOCKER_VERSION: "2.0.0"
  caddy:
    from: ./caddy

tasks:
  default:
    labels:
      default: true
    requires: [apt, docker, caddy]
    script: |
      echo "Done!"

  ignored:
    required_by: [default]
    script: echo 'I should be ignored'

modules:
  farm:
    imports:
      tractor:
        from: ./tractor

    tasks:
      chicken:
        requires: [egg]
        script: "echo Chicken ready"

      egg:
        script: echo 'Egg ready'
