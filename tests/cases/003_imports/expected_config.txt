working_directory: __WORKDIR__
environment:
    DOCKER_VERSION: 1.2.3
tasks:
    default:
        requires:
            - docker-config
            - docker
    docker-compose-project:
        requires:
            - docker:compose
        script: docker compose up -d
        sources:
            - docker-compose.yml
    docker-config:
        required_by:
            - docker
        script: configure docker
modules:
    apt:
        working_directory: ${EBRO_ROOT}/.apt
        tasks:
            default:
                script: echo 'Installing stuff with apt'
                sources:
                    - ${EBRO_ROOT}/something
    docker:
        working_directory: __WORKDIR__/docker
        environment:
            DOCKER_VERSION_GITHUB_ID: v${DOCKER_VERSION}
        tasks:
            default:
                requires:
                    - compose
                    - :apt
        modules:
            compose:
                working_directory: __WORKDIR__/docker-compose
                tasks:
                    default:
                        script: echo 'docker compose'
