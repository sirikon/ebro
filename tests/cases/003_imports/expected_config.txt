working_directory: __WORKDIR__
tasks:
    default:
        requires:
            - docker-config
            - docker
    docker-compose-project:
        requires:
            - docker:compose
        script: docker compose up -d
        sources:
            - docker-compose.yml
    docker-config:
        required_by:
            - docker
        script: configure docker
modules:
    docker:
        working_directory: __WORKDIR__/docker
        environment:
            DOCKER_VERSION: 1.2.3
        tasks:
            default:
                requires:
                    - compose
        modules:
            compose:
                working_directory: __WORKDIR__/docker-compose
                tasks:
                    default:
                        script: echo 'docker compose'
